<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <title>Cookie tester (Netlify)</title>
</head>

<body>
    <h1>Cookie tester page</h1>
    <p><a href="/.netlify/functions/set-cookie">Set cookies (serverless)</a></p>

    <h2>document.cookie (JS-visible)</h2>
    <pre id="jscookie">loading…</pre>

    <h2>Fetch /.netlify/functions/show-server-cookies</h2>
    <pre id="srvcookies">loading…</pre>

    <script>
        function refresh() {
            document.getElementById('jscookie').textContent = document.cookie || '(no js cookies)';
            fetch('/.netlify/functions/show-server-cookies')
                .then(r => r.json())
                .then(j => {
                    document.getElementById('srvcookies').textContent = JSON.stringify(j, null, 2);
                })
                .catch(e => {
                    document.getElementById('srvcookies').textContent = 'fetch error: ' + e;
                });
        }
        refresh();
        setInterval(refresh, 2000);
    </script>
</body>

</html>